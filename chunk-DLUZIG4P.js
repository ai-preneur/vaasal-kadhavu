import{a as A,b as B}from"./chunk-3ZXWSFGO.js";import{a as z,b as L}from"./chunk-GV3R3P72.js";import{a as E,b as c}from"./chunk-JZZZ445X.js";import"./chunk-X5YLR3NI.js";import{k,l as T,m as I,n as H,o as j,p as F,q as U,r as $}from"./chunk-U6XLKD35.js";import{d as O,h as P,i as S,m as w}from"./chunk-C5WDSWUU.js";import{Da as p,Na as C,Sa as x,T as v,Ya as _,Z as d,ab as l,bb as r,cb as n,db as f,hb as u,ib as h,sa as m,sb as o,tb as b,ub as M,xb as y,yb as D}from"./chunk-JRLHULWQ.js";import{i as s}from"./chunk-ODN5LVDJ.js";var g=class a{http=d(S);supabase=d(c);apiUrl=E.apiUrl;getHeaders(){return s(this,null,function*(){let e=yield this.supabase.getAccessToken();return new P({"Content-Type":"application/json",Authorization:`Bearer ${e}`})})}getData(e){return s(this,null,function*(){let t=yield this.getHeaders();return this.http.get(`${this.apiUrl}${e}`,{headers:t})})}postData(e,t){return s(this,null,function*(){let i=yield this.getHeaders();return this.http.post(`${this.apiUrl}${e}`,t,{headers:i})})}static \u0275fac=function(t){return new(t||a)};static \u0275prov=v({token:a,factory:a.\u0275fac,providedIn:"root"})};function J(a,e){a&1&&(r(0,"p"),o(1,"Loading data from server..."),n(),f(2,"mat-spinner",10))}function W(a,e){if(a&1&&(r(0,"div",7)(1,"h3"),o(2,"Server Response:"),n(),r(3,"pre"),o(4),y(5,"json"),n()()),a&2){let t=h();p(4),b(D(5,1,t.apiData()))}}function q(a,e){if(a&1&&(r(0,"div",8),o(1),n()),a&2){let t=h();p(),M(" ",t.error()," ")}}var N=class a{supabase=d(c);api=d(g);router=d(w);userEmail=m("");loading=m(!1);apiData=m(null);error=m("");ngOnInit(){return s(this,null,function*(){let e=this.supabase.currentUser();e&&this.userEmail.set(e.email||"")})}fetchData(){return s(this,null,function*(){this.loading.set(!0),this.error.set(""),this.apiData.set(null);try{(yield this.api.getData("/api/data")).subscribe({next:t=>{this.apiData.set(t),this.loading.set(!1)},error:t=>{this.error.set("Failed to fetch data from server: "+t.message),this.loading.set(!1)}})}catch(e){this.error.set("Failed to fetch data: "+e.message),this.loading.set(!1)}})}logout(){return s(this,null,function*(){yield this.supabase.signOut(),this.router.navigate(["/login"])})}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=C({type:a,selectors:[["app-dashboard"]],decls:23,vars:5,consts:[[1,"dashboard-container"],["color","primary"],[1,"spacer"],[1,"user-email"],["mat-raised-button","",3,"click"],[1,"content"],[1,"dashboard-card"],[1,"api-data"],[1,"error-message"],["mat-raised-button","","color","primary",3,"click","disabled"],["diameter","40"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"mat-toolbar",1)(2,"span"),o(3,"Dashboard"),n(),f(4,"span",2),r(5,"span",3),o(6),n(),r(7,"button",4),u("click",function(){return i.logout()}),o(8,"Logout"),n()(),r(9,"div",5)(10,"mat-card",6)(11,"mat-card-header")(12,"mat-card-title"),o(13,"Welcome to Your Dashboard"),n()(),r(14,"mat-card-content")(15,"p"),o(16,"You are successfully logged in!"),n(),x(17,J,3,0)(18,W,6,3,"div",7)(19,q,2,1,"div",8),n(),r(20,"mat-card-actions")(21,"button",9),u("click",function(){return i.fetchData()}),o(22," Fetch Data from Server "),n()()()()()),t&2&&(p(6),b(i.userEmail()),p(11),l(i.loading()?17:-1),p(),l(!i.loading()&&i.apiData()?18:-1),p(),l(!i.loading()&&i.error()?19:-1),p(2),_("disabled",i.loading()))},dependencies:[O,B,A,T,k,$,I,F,j,U,H,L,z],styles:[".dashboard-container[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column}mat-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center}.spacer[_ngcontent-%COMP%]{flex:1}.user-email[_ngcontent-%COMP%]{margin-right:16px;font-size:14px}.content[_ngcontent-%COMP%]{flex:1;padding:24px;background:#f5f5f5;overflow-y:auto}.dashboard-card[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}mat-card-header[_ngcontent-%COMP%]{padding:16px 0}mat-card-content[_ngcontent-%COMP%]{padding:24px 0;min-height:200px}.api-data[_ngcontent-%COMP%]{margin-top:16px;padding:16px;background:#f5f5f5;border-radius:4px}.api-data[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}pre[_ngcontent-%COMP%]{white-space:pre-wrap;word-wrap:break-word}.error-message[_ngcontent-%COMP%]{color:#f44336;padding:16px;background:#ffebee;border-radius:4px;margin-top:16px}mat-spinner[_ngcontent-%COMP%]{margin:24px auto}mat-card-actions[_ngcontent-%COMP%]{padding:16px 0}"]})};export{N as DashboardComponent};
